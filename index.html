<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surprenez Votre Amour avec Lovetoo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffccd5, #ff80ab);
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header */
        header {
            text-align: center;
            padding: 80px 20px;
            background: url('https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80') no-repeat center/cover;
            position: relative;
        }
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        header h1 {
            font-size: 3.5em;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
        }
        header p {
            font-size: 1.5em;
            max-width: 700px;
            margin: 20px auto;
            position: relative;
            z-index: 1;
        }
        .btn-cta {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(90deg, #ff4081, #f50057);
            color: #fff;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 500;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .btn-cta:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        /* Container */
        .container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            color: #333;
        }
        h2 {
            font-size: 2em;
            color: #ff4081;
            margin-bottom: 20px;
        }
        input, textarea {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ff80ab;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        input:focus, textarea:focus {
            border-color: #ff4081;
            outline: none;
        }
        input:disabled, textarea:disabled {
            background: #f0f0f0;
            cursor: not-allowed;
        }

        /* Contador de Data */
        .counter {
            text-align: center;
            font-size: 1.5em;
            color: #fff;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Champs Photos */
        .photo-upload {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px auto;
            justify-content: center;
        }
        .photo-box {
            width: 120px;
            height: 120px;
            border: 2px dashed #ff80ab;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: #fff;
            position: relative;
            overflow: hidden;
        }
        .photo-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }
        .photo-box::before {
            content: '+';
            font-size: 2em;
            color: #ff4081;
        }
        .photo-box.filled::before {
            content: '';
        }

        /* Preview */
        .preview {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, #d8b9ff, #b388ff);
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 400px;
            border: 3px solid #ffd700;
        }
        .preview::before {
            content: '💕';
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 2em;
            color: #ffd700;
            animation: float 5s infinite;
        }
        .preview::after {
            content: '💞';
            position: absolute;
            bottom: 10px;
            right: 20px;
            font-size: 2em;
            color: #ffd700;
            animation: float 6s infinite;
        }
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }
        .preview h2 {
            font-size: 1.8em;
            color: #4a2c6e;
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
        }
        .preview-content {
            position: relative;
            z-index: 1;
        }
        .preview-content .counter {
            margin-bottom: 20px;
            font-size: 1.5em;
            color: #4a2c6e;
            background: rgba(255, 255, 255, 0.3);
            border: 2px dashed #ffd700;
            padding: 15px;
            border-radius: 10px;
            animation: pulse 2s infinite;
        }
        .preview-content .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            max-width: 80%;
        }
        .preview-content .photo-item {
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .preview-content .photo-item img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            animation: fadeInUp 0.5s ease-out forwards;
            border: 2px solid #ffd700;
            max-width: 120px;
        }
        .preview-content .photo-item img:hover {
            transform: scale(1.1);
        }
        .preview-content .message, .preview-content .meeting-story {
            font-size: 1.2em;
            color: #4a2c6e;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid #ffd700;
        }
        .preview-content .music-link {
            font-size: 1em;
            color: #4a2c6e;
            word-break: break-all;
            margin-top: 20px;
        }
        .preview-content #validityInfo {
            font-size: 1em;
            color: #4a2c6e;
        }
        .emoji {
            position: absolute;
            font-size: 1.5em;
            opacity: 0.7;
            animation: rise 5s linear infinite;
            color: #ffd700;
        }
        @keyframes rise {
            0% { transform: translateY(100%) scale(0.5); opacity: 0; }
            20% { opacity: 0.7; }
            100% { transform: translateY(-100%) scale(1.5); opacity: 0; }
        }
        .emoji.with-text {
            font-size: 1em;
            color: #ffd700;
        }

        /* Animações das Fotos */
        @keyframes slideDown {
            0% { transform: translateY(-100%) scale(0.5); opacity: 0; }
            50% { transform: translateY(0) scale(1.1); opacity: 1; }
            100% { transform: translateY(0) scale(1); }
        }
        @keyframes fadeInUp {
            0% { transform: translateY(50px) scale(0.8); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }
        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }

        /* Opções de Animação */
        .animation-options {
            margin-top: 10px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .animation-option {
            padding: 10px 20px;
            background: #b388ff;
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .animation-option:hover {
            background: #4a2c6e;
        }
        .animation-option.selected {
            background: #ffd700;
            color: #4a2c6e;
        }

        /* Planos */
        .planos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .plano {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #ff80ab;
            cursor: pointer;
            transition: transform 0.3s, border-color 0.3s;
        }
        .plano.selected {
            border-color: #ff4081;
            transform: scale(1.05);
        }
        .plano h3 {
            color: #ff4081;
            font-size: 1.5em;
        }
        .plano p {
            color: #666;
        }

        /* Musiques */
        .musicas {
            margin: 30px 0;
        }
        .musica-lista {
            list-style: none;
            padding: 0;
        }
        .musica-lista li {
            padding: 15px;
            background: #ffe6f2;
            margin: 5px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .musica-lista li:hover, .musica-lista li.selected {
            background: #ff4081;
            color: #fff;
        }
        .musica-custom {
            margin-top: 20px;
        }

        /* Boutons */
        .btn-styled {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 15px;
            background: linear-gradient(90deg, #ff4081, #f50057);
            color: #fff;
            border: none;
            border-radius: 50px;
            font-size: 1.3em;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }
        .btn-styled::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        .btn-styled:hover::before {
            width: 300px;
            height: 300px;
        }
        .btn-styled:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        /* Media Queries para Responsividade */
        @media (max-width: 768px) {
            header { padding: 40px 15px; }
            header h1 { font-size: 2.5em; }
            header p { font-size: 1.2em; max-width: 90%; }
            .btn-cta { padding: 12px 30px; font-size: 1em; }
            .container { margin: 20px 10px; padding: 20px; }
            h2 { font-size: 1.5em; }
            input, textarea { padding: 12px; font-size: 0.9em; }
            .photo-box { width: 100px; height: 100px; }
            .preview { padding: 20px; min-height: 300px; }
            .preview h2 { font-size: 1.5em; }
            .preview-content .photo-grid { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); max-width: 90%; }
            .preview-content .photo-item img { height: 100px; }
            .preview-content .message, .preview-content .meeting-story { font-size: 1em; }
            .preview-content .counter { font-size: 1.2em; padding: 15px; }
            .planos { grid-template-columns: 1fr; gap: 15px; }
            .plano { padding: 15px; }
            .plano h3 { font-size: 1.3em; }
            .musicas { margin: 20px 0; }
            .musica-custom { flex-direction: column; gap: 5px; }
            .musica-custom input { width: 100%; }
            .btn-styled { max-width: 250px; padding: 12px; font-size: 1.1em; }
            .animation-options { flex-direction: column; gap: 10px; }
        }

        @media (max-width: 480px) {
            header h1 { font-size: 2em; }
            header p { font-size: 1em; }
            .btn-cta { padding: 10px 25px; font-size: 0.9em; }
            .container { padding: 15px; }
            h2 { font-size: 1.3em; }
            input, textarea { padding: 10px; font-size: 0.8em; }
            .photo-box { width: 80px; height: 80px; }
            .preview { padding: 15px; min-height: 250px; }
            .preview h2 { font-size: 1.2em; }
            .preview-content .photo-grid { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); max-width: 90%; }
            .preview-content .photo-item img { height: 80px; }
            .preview-content .message, .preview-content .meeting-story { font-size: 0.9em; }
            .preview-content .counter { font-size: 1em; padding: 10px; }
            .plano h3 { font-size: 1.2em; }
            .btn-styled { max-width: 200px; padding: 10px; font-size: 1em; }
        }

        /* Novo campo para gênero */
        .gender-options {
            margin: 10px 0;
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        .gender-options label {
            margin-right: 5px;
        }

        /* Como Funciona */
        .how-it-works {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        .how-it-works .step {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .how-it-works .step h3 {
            font-size: 1.5em;
            color: #ff4081;
            margin-bottom: 10px;
        }
        .how-it-works .step p {
            font-size: 1em;
            color: #333;
        }

        /* FAQ */
        .faq {
            margin: 40px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .faq h2 {
            font-size: 2em;
            color: #ff4081;
            margin-bottom: 20px;
        }
        .faq .question {
            margin-bottom: 20px;
        }
        .faq .question h3 {
            font-size: 1.2em;
            color: #ff4081;
            margin-bottom: 10px;
        }
        .faq .question p {
            font-size: 1em;
            color: #333;
        }
    </style>
</head>
<body>
    <form id="coupleForm" enctype="multipart/form-data">
        <header>
            <h1>Surprenez Votre Amour avec Lovetoo</h1>
            <p>Créez un compteur dynamique de votre temps ensemble et faites un cadeau surprise inoubliable. Scannez le QR Code 💕</p>
            <a href="#formulaire" class="btn-cta">Commencez Maintenant</a>
        </header>

        <div class="container" id="formulaire">
            <div class="how-it-works">
                <div class="step">
                    <h3>1. Remplissez les données</h3>
                    <p>Ajoutez les informations sur votre couple, vos photos et un message spécial.</p>
                </div>
                <div class="step">
                    <h3>2. Effectuez le paiement</h3>
                    <p>Choisissez votre plan et effectuez le paiement de manière sécurisée.</p>
                </div>
                <div class="step">
                    <h3>3. Recevez votre site + QR Code</h3>
                    <p>Recevez votre page personnalisée et un QR Code par e-mail.</p>
                </div>
                <div class="step">
                    <h3>4. Surprenez votre amour</h3>
                    <p>Montrez votre page à votre partenaire et surprenez-le avec ce cadeau unique.</p>
                </div>
            </div>

            <h2>Choisissez le prix</h2>
            <div class="planos">
                <div class="plano" onclick="selectPlan('basique')">
                    <h3>29 .- Prix Basique</h3>
                    <p>4 photos</p>
                    <p>Valable 1 an</p>
                    <p>Pas de musique</p>
                </div>
                <div class="plano" onclick="selectPlan('premium')">
                    <h3>49.- Prix Premium</h3>
                    <p>10 photos</p>
                    <p>Valable à vie - avec musique</p>
                </div>
            </div>
            <input type="hidden" id="selectedPlan" name="plan">
            <input type="hidden" id="selectedAnimation" name="animation">

            <h2>Personnalisez Votre Page 💕</h2>
            <input type="text" placeholder="Nom du couple" id="nomCouple" name="name" required>
            <input type="date" id="dateRelation" name="date" required>
            <input type="time" id="timeRelation" name="time" required>
            <textarea placeholder="Écrivez un message spécial..." id="message" name="message" rows="4" required></textarea>
            <textarea placeholder="Comment et où vous êtes-vous rencontrés ?" id="meetingStory" name="meetingStory" rows="2" required></textarea>
            <input type="email" placeholder="Votre e-mail" id="email" name="email" required>

            <h2>À qui s'adresse la surprise?</h2>
            <div class="gender-options">
                <label><input type="radio" name="genderTarget" value="woman" required> Femme</label>
                <label><input type="radio" name="genderTarget" value="man"> Partenaire (Homme)</label>
            </div>

            <h2>Choisissez les meilleures photos!</h2>
            <div class="photo-upload" id="photoUpload"></div>

            <div class="preview">
                <h2>Votre page sera bientôt prête</h2>
                <div class="preview-content" id="previewContent">
                    <div class="counter" id="dateCounter"></div>
                    <div class="photo-grid" id="previewPhotos"></div>
                    <p class="message" id="previewMessage"></p>
                    <p class="meeting-story" id="previewMeeting"></p>
                    <p class="music-link" id="previewMusique"></p>
                    <p id="validityInfo"></p>
                    <div class="animation-options">
                        <div class="animation-option" onclick="setAnimation('slideDown')">Descente en douceur</div>
                        <div class="animation-option" onclick="setAnimation('fadeInUp')">Montée douce</div>
                        <div class="animation-option" onclick="setAnimation('bounceIn')">Sauter</div>
                    </div>
                </div>
            </div>

            <div class="musicas">
                <h2>Choisissez une Musique Romantique 🎶 (Premium)</h2>
                <ul class="musica-lista">
                    <li onclick="selectMusic(this, 'https://www.youtube.com/watch?v=Qj2Xald7NYQ')">🎵 A Thousand Years - Christina Perri</li>
                    <li onclick="selectMusic(this, 'https://www.youtube.com/watch?v=450p7goxZqg')">🎵 Perfect - Ed Sheeran</li>
                    <li onclick="selectMusic(this, 'https://www.youtube.com/watch?v=xKjEDaYdKuk')">🎵 All of Me - John Legend</li>
                    <li onclick="selectMusic(this, 'https://www.youtube.com/watch?v=5CL1s5U-8as')">🎵 Love Me Like You Do - Ellie Goulding</li>
                </ul>
                <div class="musica-custom">
                    <input type="text" placeholder="Insérez un lien YouTube" id="youtubeLink" name="music" disabled>
                </div>
            </div>
            <input type="hidden" id="selectedMusic" name="music">

            <!-- Botões de pagamento -->
            <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
                <a href="https://buy.stripe.com/5kA2aS3Hx4Gpdri14r" class="btn-styled" style="text-decoration: none; text-align: center;">
                    Créer Votre Page pour 29 CHF
                </a>
                <a href="https://buy.stripe.com/8wM9Dkguj1ud0EwcNa" class="btn-styled" style="text-decoration: none; text-align: center;">
                    Créer Votre Page pour 49 CHF
                </a>
            </div>

            <div class="faq">
                <h2>Questions Fréquentes</h2>
                <div class="question">
                    <h3>Qu’est-ce que Lovetoo ?</h3>
                    <p>Lovetoo est une plateforme qui permet de créer des pages personnalisées pour célébrer votre relation amoureuse. Vous pouvez ajouter des photos, un message spécial et un compteur qui montre depuis combien de temps vous êtes ensemble. C’est parfait pour un cadeau surprise !</p>
                </div>
                <div class="question">
                    <h3>Quels sont les moyens de paiement acceptés ?</h3>
                    <p>Nous acceptons les paiements par carte Visa, MasterCard, Twint, Klarna et via un lien de paiement sécurisé.</p>
                </div>
                <div class="question">
                    <h3>Combien de temps cela prend-il ?</h3>
                    <p>Une fois le paiement confirmé, vous recevrez votre page personnalisée en moins de 2 heures.</p>
                </div>
                <div class="question">
                    <h3>La page a-t-elle une validité ?</h3>
                    <p>Oui, votre page est valable pour 1 ans avec le prix à 29.-</p>
                </div>
                <div class="question">
                    <h3>Comment contacter le support ?</h3>
                    <p>Vous pouvez contacter notre support client par e-mail à l’adresse lovetoo@gmail.com.</p>
                </div>
            </div>
        </div>
    </form>

    <script>
        let selectedPlan = null;
        let selectedMusic = null;
        let startDate = null;
        let selectedAnimation = 'fadeInUp';
        let selectedGender = 'woman';

        function updatePhotoFields() {
            const photoUpload = document.getElementById('photoUpload');
            photoUpload.innerHTML = '';
            const maxPhotos = selectedPlan === 'basique' ? 4 : (selectedPlan === 'premium' ? 10 : 4);
            for (let i = 0; i < maxPhotos; i++) {
                const div = document.createElement('div');
                div.classList.add('photo-box');
                div.innerHTML = '<input type="file" accept="image/*" name="photos" style="display: none;">';
                div.onclick = () => div.querySelector('input').click();
                div.querySelector('input').onchange = (e) => {
                    if (e.target.files[0]) {
                        div.classList.add('filled');
                        const img = document.createElement('img');
                        img.src = URL.createObjectURL(e.target.files[0]);
                        div.appendChild(img);
                        updatePreview();
                    }
                };
                photoUpload.appendChild(div);
            }
        }

        function selectPlan(plan) {
            selectedPlan = plan;
            document.getElementById('selectedPlan').value = plan;
            document.querySelectorAll('.plano').forEach(p => p.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            updatePhotoFields();
            const youtubeLinkInput = document.getElementById('youtubeLink');
            const musicList = document.querySelectorAll('.musica-lista li');
            if (plan === 'basique') {
                youtubeLinkInput.disabled = true;
                musicList.forEach(li => li.style.pointerEvents = 'none');
                selectedMusic = null;
                document.getElementById('selectedMusic').value = '';
                youtubeLinkInput.value = '';
            } else {
                youtubeLinkInput.disabled = false;
                musicList.forEach(li => li.style.pointerEvents = 'auto');
            }
            updatePreview();
            updateValidityInfo();
        }

        function selectMusic(element, musicLink) {
            if (selectedPlan === 'premium') {
                selectedMusic = musicLink;
                document.getElementById('youtubeLink').value = musicLink;
                document.getElementById('selectedMusic').value = musicLink;
                document.querySelectorAll('.musica-lista li').forEach(li => li.classList.remove('selected'));
                element.classList.add('selected');
                updatePreview();
            }
        }

        function startCounter() {
            const dateInput = document.getElementById('dateRelation').value;
            const timeInput = document.getElementById('timeRelation').value;
            if (dateInput && timeInput) {
                startDate = new Date(`${dateInput}T${timeInput}`);
                updateCounter();
            }
        }

        function updateCounter() {
            if (!startDate) return;
            const now = new Date();
            const diffMs = now - startDate;
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
            document.getElementById('dateCounter').innerText = `Ensemble depuis : ${diffDays} jours, ${diffHours} heures, ${diffMinutes} minutes 🎉`;
            setTimeout(updateCounter, 60000);
        }

        function updateValidityInfo() {
            const validityInfo = document.getElementById('validityInfo');
            if (selectedPlan === 'basique') {
                validityInfo.innerText = 'Valable pour 1 an';
            } else if (selectedPlan === 'premium') {
                validityInfo.innerText = 'Valable à vie - personnalisable';
            } else {
                validityInfo.innerText = '';
            }
        }

        function addAnimatedEmojis() {
            const preview = document.querySelector('.preview');
            const emojis = ['💕', '💖', '💞', '❤️', '😍'];
            const messages = ['I love you', 'Forever', 'Mon cœur'];
            setInterval(() => {
                const emoji = document.createElement('div');
                emoji.classList.add('emoji');
                emoji.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                if (Math.random() > 0.7) {
                    emoji.classList.add('with-text');
                    emoji.innerText += ` ${messages[Math.floor(Math.random() * messages.length)]}`;
                }
                emoji.style.left = `${Math.random() * 100}%`;
                emoji.style.animationDuration = `${4 + Math.random() * 3}s`;
                preview.appendChild(emoji);
                setTimeout(() => emoji.remove(), 7000);
            }, 1000);
        }

        function setAnimation(animation) {
            selectedAnimation = animation;
            document.querySelectorAll('.animation-option').forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            document.getElementById('selectedAnimation').value = animation;
            updatePreview();
        }

        function updatePreview() {
            const previewPhotos = document.getElementById('previewPhotos');
            previewPhotos.innerHTML = '';
            document.querySelectorAll('.photo-box img').forEach((img, index) => {
                const photoDiv = document.createElement('div');
                photoDiv.classList.add('photo-item');
                const newImg = document.createElement('img');
                newImg.src = img.src;
                newImg.style.animation = `${selectedAnimation} 0.5s ease-out forwards ${index * 0.1}s`;
                photoDiv.appendChild(newImg);
                previewPhotos.appendChild(photoDiv);
            });
            document.getElementById('previewMessage').innerText = document.getElementById('message').value || 'Écrivez un message spécial...';
            document.getElementById('previewMeeting').innerText = document.getElementById('meetingStory').value || 'Comment et où vous êtes-vous rencontrés ?';
            const youtubeLink = document.getElementById('youtubeLink').value;
            document.getElementById('previewMusique').innerText = selectedPlan === 'premium' && youtubeLink ? `Musique: ${youtubeLink}` : (selectedPlan === 'premium' && selectedMusic ? `Musique: ${selectedMusic}` : '');
            updateValidityInfo();

            const genderRadios = document.querySelectorAll('input[name="genderTarget"]');
            genderRadios.forEach(radio => {
                if (radio.checked) {
                    selectedGender = radio.value;
                }
            });
            const preview = document.querySelector('.preview');
            if (selectedGender === 'woman') {
                preview.style.background = 'linear-gradient(135deg, #ffdde1, #ff4081)';
            } else if (selectedGender === 'man') {
                preview.style.background = 'linear-gradient(135deg, #d2e0fb, #4a90e2)';
            }
        }

        document.getElementById('create-button').addEventListener('click', function() {
            const form = document.getElementById('coupleForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            if (!selectedPlan) {
                alert('Veuillez sélectionner un plan avant de continuer.');
                return;
            }

            const dateInput = document.getElementById('dateRelation').value;
            const timeInput = document.getElementById('timeRelation').value;
            if (dateInput && timeInput) {
                const selectedDate = new Date(`${dateInput}T${timeInput}`);
                const now = new Date();
                if (selectedDate > now) {
                    alert('Veuillez choisir une date et une heure dans le passé pour le début de votre relation.');
                    return;
                }
            }

            // Redireciona para o Stripe
            window.location.href = 'https://stripe.com';
        });

        document.getElementById('nomCouple').addEventListener('input', updatePreview);
        document.getElementById('dateRelation').addEventListener('change', () => { startCounter(); updatePreview(); });
        document.getElementById('timeRelation').addEventListener('change', () => { startCounter(); updatePreview(); });
        document.getElementById('message').addEventListener('input', updatePreview);
        document.getElementById('meetingStory').addEventListener('input', updatePreview);
        document.getElementById('youtubeLink').addEventListener('input', function() {
            if (selectedPlan === 'premium') {
                selectedMusic = this.value;
                document.getElementById('selectedMusic').value = this.value;
                document.querySelectorAll('.musica-lista li').forEach(li => li.classList.remove('selected'));
                updatePreview();
            }
        });
        document.querySelectorAll('input[name="genderTarget"]').forEach(radio => {
            radio.addEventListener('change', updatePreview);
        });

        updatePhotoFields();
        addAnimatedEmojis();
        startCounter();
        setAnimation('fadeInUp');
    </script>
</body>
</html>
